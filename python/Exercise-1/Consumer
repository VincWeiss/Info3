'''
Created on 29.11.2015

@author: Oxana
'''
import Buffer
import threading
from time import sleep
from Buffer import pcpBuffer

class Consumer():
    
    consumerQueue = []
    
    def __init__(self, consumerid):
        self.consumerid = consumerid
        self.pcpBuffer = Buffer.pcpBuffer
        
    def getFromBuffer(self):
        print("TTEEEESCCCHHD")
        numberFromBuffer = self.pcpBuffer.popNext()
        print("This is a number from the PCPBuffer : " + str(numberFromBuffer))
        
    def runConsumer(consumerAmount):  # @NoSelf
        i = 0
        while i < consumerAmount:
            consID = i + 1
            print("the id of the consumer " + str(consID))
            consumer = Consumer(consID)
            Consumer.consumerQueue.append(consumer)
            i += 1   
            
        x = 0
        while True:
            for consumer in Consumer.consumerQueue:
                print("the id of the CONSUMER " + str(consumer.consumerid))
                pcpBuffer.isFull()
                if pcpBuffer.isBufferFull is True:   
                    print("--------TEST----------") 
                    consumer.getFromBuffer()
                    sleep(2)
                    x += 1
                else:
                    print("Not Allowed to read products")
                    sleep(2)
    
#end class
